<div class="space-y-6 m-6 text-black">

  <!-- Header -->
  <div class="flex  flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
    <div>
      <h1 class="text-2xl font-bold text-foreground">របាយការណ៍</h1>
      <p class="text-muted-foreground text-sm mt-1">ទិដ្ឋភាពទូទៅនៃអាជីវកម្មរបស់អ្នក</p>
    </div>
    <div class="flex items-center gap-3">
      <select [(ngModel)]="dateRange" class="w-40 select bg-white rounded-xl border text-gray-600 ">
        <option value="week">សប្តាហ៍នេះ</option>
        <option value="month">ខែនេះ</option>
        <option value="quarter">ត្រីមាសនេះ</option>
        <option value="year">ឆ្នាំនេះ</option>
      </select>
      <button class="border rounded-xl text-black cursor-pointer border-gray-300 p-2 flex items-center gap-2"><lucide-angular [img]="Filter" class="w-4 h-4"/> តម្រង</button>
      <button class="bg-primary text-white p-2 flex rounded-xl cursor-pointer items-center gap-2"><lucide-angular [img]="Download" class="w-4 h-4"/> ទាញយក</button>
    </div>
  </div>

  <!-- Tabs -->
<div class="bg-card border border-gray-300 flex justify-start items-center gap-4 w-90 p-1 rounded-xl">
  
  <button
    (click)="activeTab='sales'"
    [ngClass]="{
      'bg-blue-700 text-white': activeTab === 'sales',
      'text-gray-500': activeTab !== 'sales'
    }"
    class="px-3 gap-1 flex items-center py-1 cursor-pointer rounded-xl transition"
  >
    <lucide-angular class="w-5" [img]="Users"></lucide-angular>
    របាយការណ៍លក់
  </button>

  <button
    (click)="activeTab='products'"
    [ngClass]="{
      'bg-blue-700 text-white': activeTab === 'products',
      'text-gray-500': activeTab !== 'products'
    }"
    class="px-3 gap-2 flex items-center cursor-pointer py-1 rounded-xl transition"
  >
    <lucide-angular class="w-5" [img]="Users"></lucide-angular>
    របាយការណ៍ផលិតផល
  </button>

</div>


  <!-- Sales Report Tab -->
<div *ngIf="activeTab==='sales'" class="space-y-6 mt-6">
  <!-- Stats -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">   
    <app-stat-card
      *ngFor="let item of SaleStats"
      [title]="item.title"
      [value]="item.value"
      [change]="item.value"
      [changeType]="item.changeType"
      [icon]="item.icon"
      [variant]="item.variant">
    </app-stat-card>
  </div>

  <!-- Charts -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

    <!-- Weekly Sales -->
    <div class="bg-card border-0 shadow-lg rounded-xl p-4">
      <h3 class="text-lg font-semibold flex items-center gap-2 mb-3">
        <span class="text-primary">📊</span>
        ការលក់រាយសប្តាហ៍
      </h3>

     <apx-chart
    [series]="saleChart.series"
    [chart]="saleChart.chart"
    [xaxis]="saleChart.xaxis"
    [yaxis]="saleChart.yaxis"
    [plotOptions]="saleChart.plotOptions"
    [colors]="saleChart.colors"
  >
  </apx-chart>

    </div>

    <!-- Monthly Revenue -->
    <div class="bg-card border-0 shadow-lg rounded-xl p-4">
      <h3 class="text-lg font-semibold flex items-center gap-2 mb-3">
        <span class="text-emerald-500">📈</span>
        ប្រាក់ចំណូលប្រចាំខែ
      </h3>

   <apx-chart
  [series]="revenueChart.series"
  [chart]="revenueChart.chart"
  [xaxis]="revenueChart.xaxis"
  [dataLabels]="revenueChart.dataLabels"
  [fill]="revenueChart.fill"
  [tooltip]="revenueChart.tooltip">
</apx-chart>

    </div>

  </div>
</div>


<!--  Product Report Tab -->
<div *ngIf="activeTab==='products'" class="space-y-6 mt-6">

<!-- Stats Cards -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-6">
     
 <app-stat-card
      *ngFor="let item of ProductStats"
      [title]="item.title"
      [value]="item.value"
      [change]="item.value"
      [changeType]="item.changeType"
      [icon]="item.icon"
      [variant]="item.variant">
    </app-stat-card>

   
</div>

<!-- Category Distribution -->
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6">
    <app-category-chart />
  

  <!-- Top Products -->
  <div class="shadow-lg bg-white rounded-xl p-6 lg:col-span-2">
    <h3 class="text-lg font-semibold flex items-center gap-2">
      <lucide-angular [img]="FileText" class="w-5 h-5 text-primary" />
      ផលិតផលលក់ដាច់បំផុត
    </h3>
    <div class="space-y-3 mt-3">
      <div *ngFor="let product of topProducts; let i = index" class="flex  cursor-pointer items-center gap-4 p-3 bg-gray-50 rounded-xl hover:bg-gray-200 transition">
        <div class="w-8 h-8 rounded-xl bg-primary/10 flex items-center justify-center">
          <span class="text-sm  font-bold text-primary">{{ i + 1 }}</span>
        </div>
        <div class="flex-1">
          <p class="font-medium text-gray-800">{{ product.name }}</p>
          <p class="text-sm text-gray-500">{{ product.category }}</p>
        </div>
        <div class="text-right">
          <p class="font-semibold text-gray-800">{{ product.sold }} លក់</p>
          <p class="text-sm text-gray-500">{{ product.revenue }}</p>
        </div>
        <ng-container *ngIf="product.trend === 'up'">
          <lucide-angular [img]="TrendingUp" class="w-5 h-5 text-emerald-500" />
        </ng-container>
        <ng-container *ngIf="product.trend === 'down'">
          <lucide-angular [img]="TrendingDown" class="w-5 h-5 text-rose-500" />
        </ng-container>
      </div>
    </div>
  </div>
</div>
</div>
</div>
